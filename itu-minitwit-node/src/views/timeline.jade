extends layout

block timeline
    .timeline-box
        p This is where the twits go... 

//- 
    | {% extends "layout.html" %}
    | {% block title %}
    | {% if request.endpoint == 'public_timeline' %}
    | Public Timeline
    | {% elif request.endpoint == 'user_timeline' %}
    | {{ profile_user.username }}'s Timeline
    | {% else %}
    | My Timeline
    | {% endif %}
    | {% endblock %}
    | {% block body %}
    h2 {{ self.title() }}
    |   {% if g.user %}
    |     {% if request.endpoint == 'user_timeline' %}
    .followstatus
    | {% if g.user.user_id == profile_user.user_id %}
    | This is you!
    | {% elif followed %}
    | You are currently following this user.
    a.unfollow(href="{{ url_for('unfollow_user', username=profile_user.username)\
    }}") Unfollow user
    | .
    |       {% else %}
    |         You are not yet following this user.
    a.follow(href="{{ url_for('follow_user', username=profile_user.username)\
    }}") Follow user
    | .
    |       {% endif %}
    |     {% elif request.endpoint == 'timeline' %}
    .twitbox
    h3 What's on your mind {{ g.user.username }}?
    form(action="{{ url_for('add_message') }}" method='post')
        p
        input(type='text' name='text' size='60')
        //
        input(type='submit' value='Share')
    |     {% endif %}
    |   {% endif %}
    ul.messages
    | {% for message in messages %}
    li
        img(src='{{ message.email|gravatar(size=48) }}')
        p
        strong
            a(href="{{ url_for('user_timeline', username=message.username)\
            }}") {{ message.username }}
        |       {{ message.text }}
        small â€” {{ message.pub_date|datetimeformat }}
        |   {% else %}
    li
        em There's no message so far.
        |   {% endfor %}
    | {% endblock %}
